{% extends 'base.html.twig' %}

{% block title %}Search{% endblock %}

{% block body %}
	<div class="container my-4">
		{{ form_start(form) }}
		{{ form_end(form) }}

		<div class="justify-content-center">
			<h2 class="lead">Your selection â˜‘</h2>
			<ul id="comparatorList">
				{% for item in ids %}
					<li id="{{ item }}">
						<p>{{ item }} <a class="btn btn-danger remove-player">X</a></p>
					</li>
				{% endfor %}
			</ul>
		</div>
	</div>

	<div class="container my-4">
		{% if results is defined %}
			<table id="example" class="display table table-hover" style="width:100%">
			</table>

			<nav aria-label="Page navigation">
				<ul class="pagination justify-content-center">
					{% if results['meta'].current_page > 1 %}
						<li class="page-item"><a class="page-link"
												 href="{{ path('app_result', {'name': app.request.attributes.get('_route_params').name,
													 'page': results['meta'].current_page - 1 }) }}">Previous</a></li>
					{% endif %}
					<li class="page-item"><a class="page-link" href="#">{{ results['meta'].current_page }}</a></li>
					{% if results['meta'].next_page %}
						<li class="page-item"><a class="page-link"
												 href="{{ path('app_result', {'name': app.request.attributes.get('_route_params').name,
													 'page': results['meta'].next_page }) }}">Next</a></li>
					{% endif %}
				</ul>
			</nav>
		{% endif %}
	</div>

	{{ encore_entry_script_tags('comparisonStorage') }}
	{{ encore_entry_script_tags('autocompletion') }}
	{% if results is defined %}
		<script>
            var data = {{ (results.data|json_encode|raw) }};
		</script>
		{{ encore_entry_script_tags('results') }}
	{% endif %}
{% endblock %}
